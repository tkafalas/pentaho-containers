<assembly>
  <id>bin</id>
  <!-- Specifies that our binary distribution is a zip package -->
  <formats>
    <format>zip</format>
  </formats>

  <!-- Adds the dependencies of our application to the lib directory -->
  <dependencySets>
    <dependencySet>
      <includes>
        <include>pentaho-kettle:kettle-core</include>
        <include>commons-io:commons-io</include>
        <include>commons-cli:commons-cli</include>
        <include>com.fasterxml.jackson.dataformat:jackson-dataformat-yaml</include>
        <include>com.fasterxml.jackson.core:jackson-core</include>
        <include>com.fasterxml.jackson.core:jackson-databind</include>
        <include>com.fasterxml.jackson.core:jackson-annotations</include>
        <include>org.yaml:snakeyaml</include>
        <include>org.codehaus.jackson:jackson-core-asl</include>
        <include>commons-logging:commons-logging</include>
        <include>org.jsoup:jsoup</include>
        <include>org.pentaho:pentaho-encryption-support</include>
      </includes>
        <outputDirectory>lib</outputDirectory>
        <unpack>false</unpack>
        <useTransitiveDependencies>false</useTransitiveDependencies>
        <useProjectArtifact>false</useProjectArtifact>
    </dependencySet>
  </dependencySets>

  <fileSets>
    <!--
        Adds startup scripts to the root directory of zip package. The startup
        scripts are copied from the src/main/scripts directory.
    -->
    <fileSet>
      <directory>${basedir}/src/main/scripts</directory>
      <outputDirectory></outputDirectory>
      <includes>
        <include>*.sh</include>
        <include>*.bat</include>
      </includes>
      <fileMode>0755</fileMode>
    </fileSet>

    <!--
    Adds non-executable files from the scripts folder to the root folder.
    -->
    <fileSet>
      <directory>${basedir}/src/main/scripts</directory>
      <outputDirectory></outputDirectory>
      <includes>
        <include>*</include>
      </includes>
      <excludes>
        <exclude>*.sh</exclude>
        <exclude>*.bat</exclude>
      </excludes>
    </fileSet>
    <!--
        Adds the containers and local folder
    -->
    <fileSet>
      <directory>${basedir}</directory>
      <outputDirectory></outputDirectory>
      <includes>
        <include>containers/pentaho-server/pentaho-server-auto/**</include>
        <include>containers/registry.yml</include>
        <include>containers/local/**</include>
        <include>containers/templates/single-server-auto/**</include>
        <include>containers/templates/README.md</include>
        <include>containers/pentaho-data-integration/pdi-client-auto/**</include>
        <include>artifactCache/**</include>
      </includes>
      <excludes>
        <exclude>containers/pentaho-server/pentaho-server-auto/entrypoint/docker-entrypoint.sh</exclude>
      </excludes>
    </fileSet>

    <fileSet>
      <directory>${basedir}</directory>
      <outputDirectory></outputDirectory>
      <includes>
        <include>containers/pentaho-server/pentaho-server-auto/entrypoint/docker-entrypoint.sh</include>
      </includes>
      <fileMode>0755</fileMode>
    </fileSet>

    <!--
        Adds the jar file to the root directory of the created zip package.
    -->
    <fileSet>
      <directory>${project.build.directory}</directory>
      <outputDirectory></outputDirectory>
      <includes>
        <include>*.jar</include>
      </includes>
    </fileSet>
  </fileSets>
</assembly>